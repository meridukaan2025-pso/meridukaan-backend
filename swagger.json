{
  "openapi": "3.0.0",
  "paths": {
    "/auth/me": {
      "get": {
        "operationId": "AuthController_getProfile",
        "summary": "Get current user",
        "description": "Get the authenticated user profile",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Current user profile"
          },
          "401": {
            "description": "Unauthorized"
          }
        },
        "tags": [
          "Authentication"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      },
      "put": {
        "operationId": "AuthController_updateProfile",
        "summary": "Update own profile",
        "description": "Update your own profile information (firstName, lastName, email, password). Role and storeId cannot be changed through this endpoint.",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateProfileDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Profile updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "example": "4158f662-9e15-42ef-9c4e-345b9465693c"
                    },
                    "email": {
                      "type": "string",
                      "example": "updated@meridukaan.com"
                    },
                    "firstName": {
                      "type": "string",
                      "example": "John"
                    },
                    "lastName": {
                      "type": "string",
                      "example": "Doe"
                    },
                    "role": {
                      "type": "string",
                      "enum": [
                        "ADMIN",
                        "SALES",
                        "INVENTORY",
                        "PURCHASE"
                      ],
                      "example": "SALES"
                    },
                    "storeId": {
                      "type": "string",
                      "nullable": true,
                      "example": "4158f662-9e15-42ef-9c4e-345b9465693c"
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "store": {
                      "type": "object",
                      "nullable": true,
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        },
                        "city": {
                          "type": "string"
                        },
                        "region": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid input"
          },
          "401": {
            "description": "Unauthorized - Invalid or missing JWT token"
          },
          "409": {
            "description": "Conflict - User with this email already exists"
          }
        },
        "tags": [
          "Authentication"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/auth/login": {
      "post": {
        "operationId": "AuthController_login",
        "summary": "User login",
        "description": "Authenticate user and receive JWT token",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login successful"
          },
          "401": {
            "description": "Invalid credentials"
          }
        },
        "tags": [
          "Authentication"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/auth/signup": {
      "post": {
        "operationId": "AuthController_signup",
        "summary": "User signup",
        "description": "Create a new user account and receive JWT token. Store ID is required for SALES role.",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SignupDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "User created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "access_token": {
                      "type": "string",
                      "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                    },
                    "user": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "example": "4158f662-9e15-42ef-9c4e-345b9465693c"
                        },
                        "email": {
                          "type": "string",
                          "example": "newuser@meridukaan.com"
                        },
                        "role": {
                          "type": "string",
                          "enum": [
                            "ADMIN",
                            "SALES",
                            "INVENTORY",
                            "PURCHASE"
                          ],
                          "example": "SALES"
                        },
                        "storeId": {
                          "type": "string",
                          "nullable": true,
                          "example": "4158f662-9e15-42ef-9c4e-345b9465693c"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid input or store ID required for SALES role"
          },
          "409": {
            "description": "Conflict - User with this email already exists"
          }
        },
        "tags": [
          "Authentication"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/auth/logout": {
      "post": {
        "operationId": "AuthController_logout",
        "summary": "User logout",
        "description": "Logout user. This endpoint is provided for consistency, but JWT tokens are stateless and cannot be invalidated server-side. Client should remove the token from storage.",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Logout successful",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Logged out successfully"
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "Authentication"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/stores": {
      "get": {
        "operationId": "StoresController_findAll",
        "summary": "Get all stores",
        "description": "Retrieve a list of all stores. Public endpoint - no authentication required.",
        "parameters": [],
        "responses": {
          "200": {
            "description": "List of stores retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/StoreResponseDto"
                  }
                }
              }
            }
          }
        },
        "tags": [
          "Stores"
        ]
      },
      "post": {
        "operationId": "StoresController_create",
        "summary": "Create a new store",
        "description": "Create a new store and get store ID. Public endpoint - used during user signup. Pass store name in body, API will assign a store ID.",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateStoreDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Store created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StoreResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid input"
          }
        },
        "tags": [
          "Stores"
        ]
      }
    },
    "/stores/{id}": {
      "delete": {
        "operationId": "StoresController_remove",
        "summary": "Delete store",
        "description": "Delete a store by ID. ADMIN only. Fails if store has users, inventory, or invoices.",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Store UUID",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Store deleted"
          },
          "400": {
            "description": "Cannot delete: store has users, inventory, or invoices"
          },
          "404": {
            "description": "Store not found"
          }
        },
        "tags": [
          "Stores"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/pos/scan": {
      "post": {
        "operationId": "PosController_scan",
        "summary": "Scan product QR code",
        "description": "Scan QR code (SKU) and get product details with available stock. Store ID is automatically taken from your assigned store (SALES users) or can be specified (ADMIN users). Use the product.id from the response when creating invoices.",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ScanDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Product found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "product": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "example": "42ad2ddc-3bae-4dcb-8950-66c3aa31cf3d",
                          "description": "Use this product ID in invoice creation"
                        },
                        "sku": {
                          "type": "string",
                          "example": "COKE-330ML"
                        },
                        "name": {
                          "type": "string",
                          "example": "Coca-Cola 330ml"
                        },
                        "unitPrice": {
                          "type": "number",
                          "example": 35
                        },
                        "unitSizeMl": {
                          "type": "number",
                          "example": 330,
                          "nullable": true
                        },
                        "category": {
                          "type": "string",
                          "example": "Soft Drinks"
                        },
                        "brand": {
                          "type": "string",
                          "example": "Coca-Cola"
                        },
                        "manufacturer": {
                          "type": "string",
                          "example": "The Coca-Cola Company"
                        }
                      }
                    },
                    "stockQty": {
                      "type": "number",
                      "example": 100,
                      "description": "Available stock quantity"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid request or user not assigned to a store",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "message": {
                      "type": "string",
                      "example": "User is not assigned to a store"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Product not found - use POST /products/quick-create to add this product",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 404
                    },
                    "message": {
                      "type": "string",
                      "example": "Product with SKU COKE-330ML not found"
                    },
                    "sku": {
                      "type": "string",
                      "example": "COKE-330ML",
                      "description": "Scanned SKU/barcode"
                    },
                    "suggestion": {
                      "type": "string",
                      "example": "Use POST /products/quick-create to add this product manually"
                    },
                    "endpoint": {
                      "type": "string",
                      "example": "/products/quick-create"
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "POS"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/pos/invoices": {
      "post": {
        "operationId": "PosController_createInvoice",
        "summary": "Create invoice",
        "description": "Create a new invoice with items. Store ID and Worker ID are automatically set.",
        "parameters": [
          {
            "name": "idempotency-key",
            "required": false,
            "in": "header",
            "description": "Optional: Unique key to prevent duplicate invoices",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "description": "Invoice creation request",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateInvoiceDto"
              },
              "examples": {
                "Example Request": {
                  "value": {
                    "items": [
                      {
                        "productId": "42ad2ddc-3bae-4dcb-8950-66c3aa31cf3d",
                        "qty": 5
                      }
                    ],
                    "clientInvoiceRef": "INV-2026-001"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Invoice created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "invoiceId": {
                      "type": "string",
                      "example": "invoice-uuid-123"
                    },
                    "pdfUrl": {
                      "type": "string",
                      "example": "/storage/invoices/invoice-uuid-123.pdf",
                      "nullable": true
                    },
                    "totals": {
                      "type": "object",
                      "properties": {
                        "amount": {
                          "type": "string",
                          "example": "175.00"
                        },
                        "items": {
                          "type": "number",
                          "example": 5
                        }
                      }
                    },
                    "createdAt": {
                      "type": "string",
                      "example": "2026-01-19T18:00:00.000Z"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid request, insufficient stock, or product not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "message": {
                      "type": "string",
                      "example": "One or more products not found. Missing product IDs: 7f952abc-5a32-4c47-b6c6-d4316bea9507",
                      "description": "Error message indicating which product IDs are missing or stock issues. Example: \"One or more products not found. Missing product IDs: 7f952abc-5a32-4c47-b6c6-d4316bea9507\" or \"Insufficient stock for product COKE-330ML. Available: 5, Requested: 10\""
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid or missing token"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions"
          }
        },
        "tags": [
          "POS"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      },
      "get": {
        "operationId": "PosController_getAllInvoices",
        "summary": "Get all invoices",
        "description": "Retrieve list of all invoices with optional filters. Includes items and product details.",
        "parameters": [
          {
            "name": "dateTo",
            "required": false,
            "in": "query",
            "description": "Filter to date (YYYY-MM-DD)",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "dateFrom",
            "required": false,
            "in": "query",
            "description": "Filter from date (YYYY-MM-DD)",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "storeId",
            "required": false,
            "in": "query",
            "description": "Filter by store ID",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of invoices"
          }
        },
        "tags": [
          "POS"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/pos/invoices/{id}": {
      "get": {
        "operationId": "PosController_getInvoice",
        "summary": "Get invoice details",
        "description": "Retrieve full invoice details including all items",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Invoice ID",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Invoice found"
          },
          "404": {
            "description": "Invoice not found"
          }
        },
        "tags": [
          "POS"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      },
      "delete": {
        "operationId": "PosController_deleteInvoice",
        "summary": "Delete (void) invoice",
        "description": "Delete an invoice and restore stock. ADMIN only.",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Invoice ID",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Invoice deleted"
          },
          "404": {
            "description": "Invoice not found"
          }
        },
        "tags": [
          "POS"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/pos/stats/today": {
      "get": {
        "operationId": "PosController_getTodayStats",
        "summary": "Get today's sales statistics",
        "description": "Get real-time sales statistics for today. Shows sales count and total amount for the current user's store and worker.",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Today's sales statistics",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "salesCount": {
                      "type": "number",
                      "example": 15,
                      "description": "Number of invoices created today"
                    },
                    "salesAmount": {
                      "type": "number",
                      "example": 5250.75,
                      "description": "Total sales amount for today"
                    },
                    "date": {
                      "type": "string",
                      "example": "2026-01-19",
                      "description": "Date in YYYY-MM-DD format"
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "POS"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/pos/invoices/{id}/pdf": {
      "get": {
        "operationId": "PosController_getInvoicePdf",
        "summary": "Get invoice PDF",
        "description": "Download invoice PDF file. If the PDF was not generated at invoice creation, it is generated on demand.",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Invoice ID",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "PDF file",
            "content": {
              "application/pdf": {}
            }
          },
          "404": {
            "description": "Invoice not found"
          },
          "503": {
            "description": "PDF generation failed (e.g. Chromium unavailable). Try again later."
          }
        },
        "tags": [
          "POS"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/pos/inventory": {
      "get": {
        "operationId": "PosController_getInventory",
        "summary": "Get inventory by store",
        "description": "Get inventory data for a specific store. For SALES users, storeId is automatically taken from assigned store. For ADMIN users, storeId can be specified as query parameter.",
        "parameters": [
          {
            "name": "storeId",
            "required": false,
            "in": "query",
            "description": "Store ID (optional for ADMIN, auto-set for SALES)",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Inventory data retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "storeId": {
                        "type": "string"
                      },
                      "productId": {
                        "type": "string"
                      },
                      "qtyOnHand": {
                        "type": "number",
                        "example": 100
                      },
                      "updatedAt": {
                        "type": "string"
                      },
                      "product": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "sku": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "unitPrice": {
                            "type": "number"
                          },
                          "category": {
                            "type": "object"
                          },
                          "brand": {
                            "type": "object"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "POS"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/pos/purchases": {
      "get": {
        "operationId": "PosController_getPurchases",
        "summary": "Get purchase orders",
        "description": "Get purchase orders (inventory movements of type IN) for a specific store. For ADMIN users, storeId can be specified as query parameter.",
        "parameters": [
          {
            "name": "storeId",
            "required": false,
            "in": "query",
            "description": "Store ID (optional for ADMIN)",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Purchase orders retrieved successfully"
          }
        },
        "tags": [
          "POS"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/admin/filters": {
      "get": {
        "operationId": "AdminController_getFilters",
        "summary": "Get filter options",
        "description": "Get all available filter options (stores, regions, cities, categories, brands, manufacturers) with their IDs. Use this to get IDs needed for product creation.",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Filter options with IDs",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "stores": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          }
                        }
                      }
                    },
                    "categories": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          }
                        }
                      }
                    },
                    "brands": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          }
                        }
                      }
                    },
                    "manufacturers": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        },
        "tags": [
          "Admin"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/admin/categories": {
      "get": {
        "operationId": "AdminController_getCategories",
        "summary": "Get all categories",
        "description": "Get list of all categories with their IDs. Use these IDs when creating products via POST /products endpoint.",
        "parameters": [],
        "responses": {
          "200": {
            "description": "List of categories",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string",
                        "example": "4158f662-9e15-42ef-9c4e-345b9465693c"
                      },
                      "name": {
                        "type": "string",
                        "example": "Beverages"
                      },
                      "parentId": {
                        "type": "string",
                        "nullable": true,
                        "example": null
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "Admin"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/admin/brands": {
      "get": {
        "operationId": "AdminController_getBrands",
        "summary": "Get all brands",
        "description": "Get list of all brands with their IDs and manufacturer info. Use these IDs when creating products via POST /products endpoint.",
        "parameters": [],
        "responses": {
          "200": {
            "description": "List of brands",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string",
                        "example": "4158f662-9e15-42ef-9c4e-345b9465693c"
                      },
                      "name": {
                        "type": "string",
                        "example": "Coca-Cola"
                      },
                      "manufacturerId": {
                        "type": "string",
                        "example": "4158f662-9e15-42ef-9c4e-345b9465693c"
                      },
                      "manufacturerName": {
                        "type": "string",
                        "example": "The Coca-Cola Company"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "Admin"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/admin/manufacturers": {
      "get": {
        "operationId": "AdminController_getManufacturers",
        "summary": "Get all manufacturers",
        "description": "Get list of all manufacturers with their IDs. Use these IDs when creating products via POST /products endpoint.",
        "parameters": [],
        "responses": {
          "200": {
            "description": "List of manufacturers",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string",
                        "example": "4158f662-9e15-42ef-9c4e-345b9465693c"
                      },
                      "name": {
                        "type": "string",
                        "example": "The Coca-Cola Company"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "Admin"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/admin/analytics/summary": {
      "get": {
        "operationId": "AdminController_getSummary",
        "summary": "Get dashboard summary",
        "description": "Get summary metrics for admin dashboard (total sales, invoices, AOV, etc.)",
        "parameters": [
          {
            "name": "storeId",
            "required": false,
            "in": "query",
            "description": "Filter by store ID",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "to",
            "required": false,
            "in": "query",
            "description": "End date (YYYY-MM-DD)",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "from",
            "required": false,
            "in": "query",
            "description": "Start date (YYYY-MM-DD)",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Summary metrics"
          }
        },
        "tags": [
          "Admin"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/admin/analytics/sales-trend": {
      "get": {
        "operationId": "AdminController_getSalesTrend",
        "parameters": [],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "Admin"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/admin/analytics/brand-distribution": {
      "get": {
        "operationId": "AdminController_getBrandDistribution",
        "parameters": [],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "Admin"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/admin/analytics/market-share": {
      "get": {
        "operationId": "AdminController_getMarketShare",
        "parameters": [],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "Admin"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/admin/analytics/brands": {
      "get": {
        "operationId": "AdminController_getBrandsAnalytics",
        "parameters": [],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "Admin"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/admin/analytics/top-skus": {
      "get": {
        "operationId": "AdminController_getTopSkus",
        "parameters": [],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "Admin"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/users": {
      "post": {
        "operationId": "UsersController_create",
        "summary": "Create a new user",
        "description": "Create a new user account. Requires ADMIN role. Store ID is required for SALES role.",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateUserDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "User created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "example": "4158f662-9e15-42ef-9c4e-345b9465693c"
                    },
                    "email": {
                      "type": "string",
                      "example": "newuser@meridukaan.com"
                    },
                    "role": {
                      "type": "string",
                      "enum": [
                        "ADMIN",
                        "SALES",
                        "INVENTORY",
                        "PURCHASE"
                      ],
                      "example": "SALES"
                    },
                    "storeId": {
                      "type": "string",
                      "nullable": true,
                      "example": "4158f662-9e15-42ef-9c4e-345b9465693c"
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "store": {
                      "type": "object",
                      "nullable": true,
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        },
                        "city": {
                          "type": "string"
                        },
                        "region": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid input or store ID required for SALES role"
          },
          "401": {
            "description": "Unauthorized - Invalid or missing JWT token"
          },
          "403": {
            "description": "Forbidden - Requires ADMIN role"
          },
          "409": {
            "description": "Conflict - User with this email already exists"
          }
        },
        "tags": [
          "Users"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      },
      "get": {
        "operationId": "UsersController_findAll",
        "summary": "Get all users",
        "description": "Retrieve a list of all users. Requires ADMIN role.",
        "parameters": [],
        "responses": {
          "200": {
            "description": "List of users retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string",
                        "example": "4158f662-9e15-42ef-9c4e-345b9465693c"
                      },
                      "email": {
                        "type": "string",
                        "example": "user@meridukaan.com"
                      },
                      "role": {
                        "type": "string",
                        "enum": [
                          "ADMIN",
                          "SALES",
                          "INVENTORY",
                          "PURCHASE"
                        ],
                        "example": "SALES"
                      },
                      "storeId": {
                        "type": "string",
                        "nullable": true,
                        "example": "4158f662-9e15-42ef-9c4e-345b9465693c"
                      },
                      "createdAt": {
                        "type": "string",
                        "format": "date-time"
                      },
                      "updatedAt": {
                        "type": "string",
                        "format": "date-time"
                      },
                      "store": {
                        "type": "object",
                        "nullable": true,
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "city": {
                            "type": "string"
                          },
                          "region": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid or missing JWT token"
          },
          "403": {
            "description": "Forbidden - Requires ADMIN role"
          }
        },
        "tags": [
          "Users"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/users/{id}": {
      "get": {
        "operationId": "UsersController_findOne",
        "summary": "Get user by ID",
        "description": "Retrieve a specific user by their ID. Requires ADMIN role.",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "User UUID",
            "schema": {
              "example": "4158f662-9e15-42ef-9c4e-345b9465693c",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "User retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "example": "4158f662-9e15-42ef-9c4e-345b9465693c"
                    },
                    "email": {
                      "type": "string",
                      "example": "user@meridukaan.com"
                    },
                    "role": {
                      "type": "string",
                      "enum": [
                        "ADMIN",
                        "SALES",
                        "INVENTORY",
                        "PURCHASE"
                      ],
                      "example": "SALES"
                    },
                    "storeId": {
                      "type": "string",
                      "nullable": true,
                      "example": "4158f662-9e15-42ef-9c4e-345b9465693c"
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "store": {
                      "type": "object",
                      "nullable": true,
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        },
                        "city": {
                          "type": "string"
                        },
                        "region": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid or missing JWT token"
          },
          "403": {
            "description": "Forbidden - Requires ADMIN role"
          },
          "404": {
            "description": "User not found"
          }
        },
        "tags": [
          "Users"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      },
      "put": {
        "operationId": "UsersController_update",
        "summary": "Update user",
        "description": "Update user information. All fields are optional. Requires ADMIN role.",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "User UUID",
            "schema": {
              "example": "4158f662-9e15-42ef-9c4e-345b9465693c",
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateUserDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "User updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "example": "4158f662-9e15-42ef-9c4e-345b9465693c"
                    },
                    "email": {
                      "type": "string",
                      "example": "updated@meridukaan.com"
                    },
                    "role": {
                      "type": "string",
                      "enum": [
                        "ADMIN",
                        "SALES",
                        "INVENTORY",
                        "PURCHASE"
                      ],
                      "example": "SALES"
                    },
                    "storeId": {
                      "type": "string",
                      "nullable": true,
                      "example": "4158f662-9e15-42ef-9c4e-345b9465693c"
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "updatedAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "store": {
                      "type": "object",
                      "nullable": true,
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        },
                        "city": {
                          "type": "string"
                        },
                        "region": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid input or store ID required for SALES role"
          },
          "401": {
            "description": "Unauthorized - Invalid or missing JWT token"
          },
          "403": {
            "description": "Forbidden - Requires ADMIN role"
          },
          "404": {
            "description": "User not found"
          },
          "409": {
            "description": "Conflict - User with this email already exists"
          }
        },
        "tags": [
          "Users"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      },
      "delete": {
        "operationId": "UsersController_remove",
        "summary": "Delete user",
        "description": "Delete a user by ID. Requires ADMIN role.",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "User UUID",
            "schema": {
              "example": "4158f662-9e15-42ef-9c4e-345b9465693c",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "User deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "User with ID xxx has been deleted successfully"
                    },
                    "deletedUser": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "email": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid or missing JWT token"
          },
          "403": {
            "description": "Forbidden - Requires ADMIN role"
          },
          "404": {
            "description": "User not found"
          }
        },
        "tags": [
          "Users"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/products": {
      "post": {
        "operationId": "ProductsController_create",
        "summary": "Create product",
        "description": "Create a new product with full details. Requires ADMIN, INVENTORY, or PURCHASE role. \n\n**Note:** This endpoint requires IDs (UUIDs) for category, brand, manufacturer, and store. To get these IDs:\n- `GET /admin/categories` - Get all categories with IDs\n- `GET /admin/brands` - Get all brands with IDs\n- `GET /admin/manufacturers` - Get all manufacturers with IDs\n- `GET /stores` - Get all stores with IDs (public endpoint)\n- `GET /admin/filters` - Get all of the above in one call\n\n**Alternative:** Use `POST /products/admin-create` if you want to create products using names instead of IDs (recommended).\n\nAll IDs must exist in the database. storeId is required - product belongs to a specific store.",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateProductDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Product created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "example": "4158f662-9e15-42ef-9c4e-345b9465693c"
                    },
                    "sku": {
                      "type": "string",
                      "example": "PRODUCT-001"
                    },
                    "name": {
                      "type": "string",
                      "example": "Product Name"
                    },
                    "storeId": {
                      "type": "string",
                      "example": "4158f662-9e15-42ef-9c4e-345b9465693c"
                    },
                    "unitPrice": {
                      "type": "number",
                      "example": 50
                    },
                    "unitSizeMl": {
                      "type": "number",
                      "example": 500,
                      "nullable": true,
                      "description": "DEPRECATED: Use unitSizeValue + unitSizeUnit"
                    },
                    "unitSizeValue": {
                      "type": "number",
                      "example": 500,
                      "nullable": true
                    },
                    "unitSizeUnit": {
                      "type": "string",
                      "example": "ML",
                      "enum": [
                        "ML",
                        "L",
                        "G",
                        "KG",
                        "PCS"
                      ],
                      "nullable": true
                    },
                    "category": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        }
                      }
                    },
                    "brand": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        },
                        "manufacturer": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "name": {
                              "type": "string"
                            }
                          }
                        }
                      }
                    },
                    "manufacturer": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid input (e.g., missing storeId, invalid IDs)"
          },
          "404": {
            "description": "Category, Brand, Manufacturer, or Store not found"
          },
          "409": {
            "description": "Product with this SKU already exists in this store"
          }
        },
        "tags": [
          "Products"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      },
      "get": {
        "operationId": "ProductsController_findAll",
        "summary": "Get all products",
        "description": "Retrieve a list of products. SALES users see only their store's products. ADMIN/INVENTORY/PURCHASE can filter by storeId query parameter.",
        "parameters": [
          {
            "name": "storeId",
            "required": false,
            "in": "query",
            "description": "Store ID (optional for ADMIN/INVENTORY/PURCHASE, auto-set for SALES)",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of products retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string",
                        "example": "4158f662-9e15-42ef-9c4e-345b9465693c"
                      },
                      "sku": {
                        "type": "string",
                        "example": "COKE-330ML"
                      },
                      "name": {
                        "type": "string",
                        "example": "Coca-Cola 330ml"
                      },
                      "unitPrice": {
                        "type": "number",
                        "example": 35
                      },
                      "unitSizeMl": {
                        "type": "number",
                        "example": 330,
                        "nullable": true
                      },
                      "category": {
                        "type": "object"
                      },
                      "brand": {
                        "type": "object"
                      },
                      "manufacturer": {
                        "type": "object"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "Products"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/products/admin-create": {
      "post": {
        "operationId": "ProductsController_createFromAdmin",
        "summary": "Create product (admin) - Recommended",
        "description": "Create product with flexible options. **This is the recommended endpoint** because:\n\n- You can use **names** instead of IDs for category, brand, and manufacturer (they will be created if they don't exist)\n- You can use either `categoryId` OR `categoryName` (same for brand/manufacturer)\n- You can optionally add initial stock\n- **storeId is required** - product must belong to a store\n\n**Example:** Use `categoryName: \"Beverages\"` instead of `categoryId: \"uuid-here\"`",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateProductAdminDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Product created"
          },
          "400": {
            "description": "Invalid input: e.g. need categoryId or categoryName; storeId when stockQuantity>0"
          }
        },
        "tags": [
          "Products"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/products/quick-create": {
      "post": {
        "operationId": "ProductsController_quickCreate",
        "summary": "Quick create product (POS)",
        "description": "Quickly create a product when barcode doesn't match. Automatically creates category, brand, and manufacturer if they don't exist. Requires SALES or ADMIN role. storeId is automatically set from user's assigned store. Use this when scanning an unknown barcode - SKU will be pre-filled from scan error.",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/QuickCreateProductDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Product created successfully. Product ID is returned immediately for use in invoice creation.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "example": "4158f662-9e15-42ef-9c4e-345b9465693c",
                      "description": "Use this product ID in invoice creation"
                    },
                    "sku": {
                      "type": "string",
                      "example": "NEW-PRODUCT-001"
                    },
                    "name": {
                      "type": "string",
                      "example": "New Product Name"
                    },
                    "storeId": {
                      "type": "string",
                      "example": "4158f662-9e15-42ef-9c4e-345b9465693c",
                      "description": "Auto-assigned from user's store"
                    },
                    "unitPrice": {
                      "type": "number",
                      "example": 50
                    },
                    "unitSizeMl": {
                      "type": "number",
                      "example": 500,
                      "nullable": true,
                      "description": "DEPRECATED: Use unitSizeValue + unitSizeUnit"
                    },
                    "unitSizeValue": {
                      "type": "number",
                      "example": 500,
                      "nullable": true
                    },
                    "unitSizeUnit": {
                      "type": "string",
                      "example": "ML",
                      "enum": [
                        "ML",
                        "L",
                        "G",
                        "KG",
                        "PCS"
                      ],
                      "nullable": true
                    },
                    "category": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string",
                          "example": "Soft Drinks"
                        }
                      }
                    },
                    "brand": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string",
                          "example": "New Brand"
                        },
                        "manufacturer": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "name": {
                              "type": "string",
                              "example": "New Manufacturer"
                            }
                          }
                        }
                      }
                    },
                    "manufacturer": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string",
                          "example": "New Manufacturer"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid input or user not assigned to store"
          },
          "409": {
            "description": "Product with this SKU already exists"
          }
        },
        "tags": [
          "Products"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/products/sku/{sku}": {
      "get": {
        "operationId": "ProductsController_findBySku",
        "summary": "Get product by SKU",
        "description": "Retrieve a product by its SKU (barcode). SALES users see only products from their store. ADMIN/INVENTORY/PURCHASE can use storeId query parameter.",
        "parameters": [
          {
            "name": "sku",
            "required": true,
            "in": "path",
            "description": "Product SKU (barcode)",
            "schema": {
              "example": "COKE-330ML",
              "type": "string"
            }
          },
          {
            "name": "storeId",
            "required": false,
            "in": "query",
            "description": "Store ID (optional for ADMIN/INVENTORY/PURCHASE, auto-set for SALES)",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Product found"
          },
          "404": {
            "description": "Product not found"
          }
        },
        "tags": [
          "Products"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/products/{id}": {
      "get": {
        "operationId": "ProductsController_findById",
        "summary": "Get product by ID",
        "description": "Retrieve a product by ID. SALES users can only access products from their store.",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Product UUID",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Product found"
          },
          "404": {
            "description": "Product not found"
          }
        },
        "tags": [
          "Products"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      },
      "put": {
        "operationId": "ProductsController_update",
        "summary": "Update product",
        "description": "Update a product. INVENTORY/PURCHASE users can only update products from their assigned store.",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Product UUID",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateProductDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Product updated"
          },
          "400": {
            "description": "Product does not belong to your store"
          },
          "404": {
            "description": "Product not found"
          }
        },
        "tags": [
          "Products"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      },
      "delete": {
        "operationId": "ProductsController_remove",
        "summary": "Delete product",
        "description": "Delete a product. INVENTORY users can only delete products from their assigned store.",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Product UUID",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Product deleted"
          },
          "400": {
            "description": "Cannot delete: product has been used in invoices or does not belong to your store"
          },
          "404": {
            "description": "Product not found"
          }
        },
        "tags": [
          "Products"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/products/{id}/stock": {
      "post": {
        "operationId": "ProductsController_addStock",
        "summary": "Add or reduce stock",
        "description": "Adjust stock at a store. quantity: positive to add, negative to reduce.",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Product UUID",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AddStockDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Stock updated"
          },
          "400": {
            "description": "Would result in negative stock"
          },
          "404": {
            "description": "Product or store not found"
          }
        },
        "tags": [
          "Products"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    }
  },
  "info": {
    "title": "Meri Dukaan POS + Admin Analytics API",
    "description": "Complete API documentation for Meri Dukaan Point of Sale system with Admin Analytics",
    "version": "1.0.0",
    "contact": {}
  },
  "tags": [
    {
      "name": "Authentication",
      "description": "User authentication endpoints"
    },
    {
      "name": "Stores",
      "description": "Store information endpoints"
    },
    {
      "name": "Users",
      "description": "User management endpoints (ADMIN only)"
    },
    {
      "name": "Products",
      "description": "Product management endpoints"
    },
    {
      "name": "POS",
      "description": "Point of Sale operations"
    },
    {
      "name": "Admin",
      "description": "Admin analytics and dashboard endpoints"
    }
  ],
  "servers": [
    {
      "url": "http://localhost:3001",
      "description": "Local development server"
    }
  ],
  "components": {
    "securitySchemes": {
      "JWT-auth": {
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "type": "http",
        "name": "JWT",
        "description": "Enter JWT token",
        "in": "header"
      }
    },
    "schemas": {
      "UpdateProfileDto": {
        "type": "object",
        "properties": {
          "firstName": {
            "type": "string",
            "example": "John",
            "description": "First name"
          },
          "lastName": {
            "type": "string",
            "example": "Doe",
            "description": "Last name"
          },
          "email": {
            "type": "string",
            "example": "updated@meridukaan.com",
            "description": "User email address (must be unique)"
          },
          "password": {
            "type": "string",
            "example": "newPassword123",
            "description": "User password (minimum 6 characters)",
            "minLength": 6
          }
        }
      },
      "LoginDto": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "example": "sales1@meridukaan.com",
            "description": "User email address"
          },
          "password": {
            "type": "string",
            "example": "password123",
            "description": "User password (minimum 6 characters)",
            "minLength": 6
          }
        },
        "required": [
          "email",
          "password"
        ]
      },
      "UserRole": {
        "type": "string",
        "description": "User role",
        "enum": [
          "ADMIN",
          "SALES",
          "INVENTORY",
          "PURCHASE"
        ]
      },
      "SignupDto": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "example": "newuser@meridukaan.com",
            "description": "User email address (must be unique)"
          },
          "password": {
            "type": "string",
            "example": "securePassword123",
            "description": "User password (minimum 6 characters)",
            "minLength": 6
          },
          "role": {
            "example": "SALES",
            "$ref": "#/components/schemas/UserRole"
          },
          "storeId": {
            "type": "string",
            "example": "4158f662-9e15-42ef-9c4e-345b9465693c",
            "description": "Store ID (optional - use storeName instead to create new store during signup)"
          },
          "storeName": {
            "type": "string",
            "example": "My Store Name",
            "description": "Store name (optional - if provided, store will be created and storeId will be assigned automatically)"
          },
          "storeRegion": {
            "type": "string",
            "example": "Punjab",
            "description": "Store region (optional - required if storeName is provided)"
          },
          "storeCity": {
            "type": "string",
            "example": "Lahore",
            "description": "Store city (optional - required if storeName is provided)"
          },
          "firstName": {
            "type": "string",
            "example": "John",
            "description": "First name"
          },
          "lastName": {
            "type": "string",
            "example": "Doe",
            "description": "Last name"
          }
        },
        "required": [
          "email",
          "password",
          "role"
        ]
      },
      "StoreResponseDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "example": "4158f662-9e15-42ef-9c4e-345b9465693c",
            "description": "Store UUID"
          },
          "name": {
            "type": "string",
            "example": "Store Karachi Central",
            "description": "Store name"
          },
          "region": {
            "type": "string",
            "example": "Sindh",
            "description": "Store region"
          },
          "city": {
            "type": "string",
            "example": "Karachi",
            "description": "Store city"
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "example": "2026-01-15T10:00:00.000Z",
            "description": "Store creation timestamp"
          },
          "updatedAt": {
            "format": "date-time",
            "type": "string",
            "example": "2026-01-15T10:00:00.000Z",
            "description": "Store last update timestamp"
          }
        },
        "required": [
          "id",
          "name",
          "region",
          "city",
          "createdAt",
          "updatedAt"
        ]
      },
      "CreateStoreDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "example": "My Store Name",
            "description": "Store name"
          },
          "region": {
            "type": "string",
            "example": "Punjab",
            "description": "Store region (optional, defaults to empty string)"
          },
          "city": {
            "type": "string",
            "example": "Lahore",
            "description": "Store city (optional, defaults to empty string)"
          }
        },
        "required": [
          "name"
        ]
      },
      "ScanDto": {
        "type": "object",
        "properties": {
          "qrValue": {
            "type": "string",
            "example": "COKE-330ML",
            "description": "QR code value (Product SKU). Store ID is automatically taken from your assigned store."
          }
        },
        "required": [
          "qrValue"
        ]
      },
      "InvoiceItemDto": {
        "type": "object",
        "properties": {
          "productId": {
            "type": "string",
            "example": "abc-123-def-456-ghi",
            "description": "Product UUID"
          },
          "qty": {
            "type": "number",
            "example": 5,
            "description": "Quantity to purchase",
            "minimum": 1
          }
        },
        "required": [
          "productId",
          "qty"
        ]
      },
      "CreateInvoiceDto": {
        "type": "object",
        "properties": {
          "storeId": {
            "type": "string",
            "description": "Store UUID (optional). Automatically set for SALES users."
          },
          "items": {
            "example": [
              {
                "productId": "abc-123-def-456-ghi",
                "qty": 5
              }
            ],
            "description": "Array of invoice items",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/InvoiceItemDto"
            }
          },
          "clientInvoiceRef": {
            "type": "string",
            "example": "INV-2026-001",
            "description": "Optional client invoice reference"
          }
        },
        "required": [
          "items"
        ]
      },
      "CreateUserDto": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "example": "newuser@meridukaan.com",
            "description": "User email address (must be unique)"
          },
          "password": {
            "type": "string",
            "example": "securePassword123",
            "description": "User password (minimum 6 characters)",
            "minLength": 6
          },
          "role": {
            "example": "SALES",
            "$ref": "#/components/schemas/UserRole"
          },
          "storeId": {
            "type": "string",
            "example": "4158f662-9e15-42ef-9c4e-345b9465693c",
            "description": "Store ID (required for SALES role)"
          },
          "firstName": {
            "type": "string",
            "example": "John",
            "description": "First name"
          },
          "lastName": {
            "type": "string",
            "example": "Doe",
            "description": "Last name"
          }
        },
        "required": [
          "email",
          "password",
          "role"
        ]
      },
      "UpdateUserDto": {
        "type": "object",
        "properties": {
          "firstName": {
            "type": "string",
            "example": "John",
            "description": "First name"
          },
          "lastName": {
            "type": "string",
            "example": "Doe",
            "description": "Last name"
          },
          "email": {
            "type": "string",
            "example": "updated@meridukaan.com",
            "description": "User email address (must be unique)"
          },
          "password": {
            "type": "string",
            "example": "newPassword123",
            "description": "User password (minimum 6 characters)",
            "minLength": 6
          },
          "role": {
            "example": "SALES",
            "$ref": "#/components/schemas/UserRole"
          },
          "storeId": {
            "type": "string",
            "example": "4158f662-9e15-42ef-9c4e-345b9465693c",
            "description": "Store ID (required for SALES role)"
          }
        }
      },
      "CreateProductDto": {
        "type": "object",
        "properties": {
          "sku": {
            "type": "string",
            "example": "NEW-PRODUCT-001",
            "description": "Product SKU (barcode/QR code value) - must be unique"
          },
          "name": {
            "type": "string",
            "example": "New Product Name",
            "description": "Product name"
          },
          "categoryId": {
            "type": "string",
            "example": "4158f662-9e15-42ef-9c4e-345b9465693c",
            "description": "Category ID (UUID) - Get from GET /admin/filters or GET /categories. Required - must exist in database."
          },
          "brandId": {
            "type": "string",
            "example": "4158f662-9e15-42ef-9c4e-345b9465693c",
            "description": "Brand ID (UUID) - Get from GET /admin/filters or GET /brands. Required - must exist in database."
          },
          "manufacturerId": {
            "type": "string",
            "example": "4158f662-9e15-42ef-9c4e-345b9465693c",
            "description": "Manufacturer ID (UUID) - Get from GET /admin/filters or GET /manufacturers. Required - must exist in database."
          },
          "storeId": {
            "type": "string",
            "example": "4158f662-9e15-42ef-9c4e-345b9465693c",
            "description": "Store ID (UUID) - Product belongs to this store. Get from GET /stores. Required - must exist in database."
          },
          "unitPrice": {
            "type": "number",
            "example": 50,
            "description": "Unit price",
            "minimum": 0
          },
          "unitSizeMl": {
            "type": "number",
            "example": 500,
            "description": "DEPRECATED: Unit size in milliliters (optional). Use unitSizeValue + unitSizeUnit instead."
          },
          "unitSizeValue": {
            "type": "number",
            "example": 500,
            "description": "Unit size value (e.g. 500)"
          },
          "unitSizeUnit": {
            "type": "string",
            "example": "ML",
            "description": "Unit size unit (ML, L, G, KG, PCS)",
            "enum": [
              "ML",
              "L",
              "G",
              "KG",
              "PCS"
            ]
          }
        },
        "required": [
          "sku",
          "name",
          "categoryId",
          "brandId",
          "manufacturerId",
          "storeId",
          "unitPrice"
        ]
      },
      "CreateProductAdminDto": {
        "type": "object",
        "properties": {
          "sku": {
            "type": "string",
            "example": "NEW-SKU-001",
            "description": "Product SKU (barcode) - must be unique"
          },
          "name": {
            "type": "string",
            "example": "Product Name"
          },
          "categoryId": {
            "type": "string",
            "example": "4158f662-9e15-42ef-9c4e-345b9465693c",
            "description": "Use existing category by ID (UUID). Either categoryId OR categoryName is required."
          },
          "categoryName": {
            "type": "string",
            "example": "Beverages",
            "description": "Create or use existing category by name. Either categoryId OR categoryName is required. Recommended: Use name instead of ID."
          },
          "brandId": {
            "type": "string",
            "example": "4158f662-9e15-42ef-9c4e-345b9465693c",
            "description": "Use existing brand by ID (UUID). Either brandId OR brandName is required."
          },
          "brandName": {
            "type": "string",
            "example": "Coca-Cola",
            "description": "Create or use existing brand by name. Either brandId OR brandName is required. If using brandName, you must also provide manufacturerId or manufacturerName. Recommended: Use name instead of ID."
          },
          "manufacturerId": {
            "type": "string",
            "example": "4158f662-9e15-42ef-9c4e-345b9465693c",
            "description": "Use existing manufacturer by ID (UUID). Required when brandName is used. Either manufacturerId OR manufacturerName."
          },
          "manufacturerName": {
            "type": "string",
            "example": "The Coca-Cola Company",
            "description": "Create or use existing manufacturer by name. Required when brandName is used. Either manufacturerId OR manufacturerName. Recommended: Use name instead of ID."
          },
          "unitPrice": {
            "type": "number",
            "example": 50,
            "minimum": 0
          },
          "unitSizeMl": {
            "type": "number",
            "example": 500
          },
          "unitSizeValue": {
            "type": "number",
            "example": 500,
            "description": "Unit size value (e.g. 500)"
          },
          "unitSizeUnit": {
            "type": "string",
            "example": "ML",
            "description": "Unit size unit (ML, L, G, KG, PCS)",
            "enum": [
              "ML",
              "L",
              "G",
              "KG",
              "PCS"
            ]
          },
          "storeId": {
            "type": "string",
            "example": "4158f662-9e15-42ef-9c4e-345b9465693c",
            "description": "Store ID (UUID) - Product belongs to this store. Required. Get store IDs from GET /stores endpoint."
          },
          "stockQuantity": {
            "type": "number",
            "example": 10,
            "description": "Initial stock; optional"
          }
        },
        "required": [
          "sku",
          "name",
          "unitPrice",
          "storeId"
        ]
      },
      "QuickCreateProductDto": {
        "type": "object",
        "properties": {
          "sku": {
            "type": "string",
            "example": "NEW-PRODUCT-001",
            "description": "Product SKU (barcode/QR code value) - must be unique"
          },
          "name": {
            "type": "string",
            "example": "New Product Name",
            "description": "Product name"
          },
          "categoryName": {
            "type": "string",
            "example": "Soft Drinks",
            "description": "Category name (will create if doesn't exist)"
          },
          "brandName": {
            "type": "string",
            "example": "New Brand",
            "description": "Brand name (will create if doesn't exist)"
          },
          "manufacturerName": {
            "type": "string",
            "example": "New Manufacturer",
            "description": "Manufacturer name (will create if doesn't exist)"
          },
          "unitPrice": {
            "type": "number",
            "example": 50,
            "description": "Unit price",
            "minimum": 0
          },
          "unitSizeMl": {
            "type": "number",
            "example": 500,
            "description": "DEPRECATED: Unit size in milliliters (optional). Use unitSizeValue + unitSizeUnit instead."
          },
          "unitSizeValue": {
            "type": "number",
            "example": 500,
            "description": "Unit size value (e.g. 500)"
          },
          "unitSizeUnit": {
            "type": "string",
            "example": "ML",
            "description": "Unit size unit (ML, L, G, KG, PCS)",
            "enum": [
              "ML",
              "L",
              "G",
              "KG",
              "PCS"
            ]
          },
          "stockQuantity": {
            "type": "number",
            "example": 10,
            "description": "Initial stock quantity for the current store. Required."
          }
        },
        "required": [
          "sku",
          "name",
          "categoryName",
          "brandName",
          "manufacturerName",
          "unitPrice",
          "stockQuantity"
        ]
      },
      "UpdateProductDto": {
        "type": "object",
        "properties": {
          "sku": {
            "type": "string",
            "example": "UPDATED-SKU-001",
            "description": "Product SKU (must stay unique)"
          },
          "name": {
            "type": "string",
            "example": "Updated Product Name"
          },
          "categoryId": {
            "type": "string",
            "example": "4158f662-9e15-42ef-9c4e-345b9465693c"
          },
          "brandId": {
            "type": "string",
            "example": "4158f662-9e15-42ef-9c4e-345b9465693c"
          },
          "manufacturerId": {
            "type": "string",
            "example": "4158f662-9e15-42ef-9c4e-345b9465693c"
          },
          "unitPrice": {
            "type": "number",
            "example": 55,
            "minimum": 0
          },
          "unitSizeMl": {
            "type": "number",
            "example": 500
          },
          "unitSizeValue": {
            "type": "number",
            "example": 500,
            "description": "Unit size value (e.g. 500)"
          },
          "unitSizeUnit": {
            "type": "string",
            "example": "ML",
            "description": "Unit size unit (ML, L, G, KG, PCS)",
            "enum": [
              "ML",
              "L",
              "G",
              "KG",
              "PCS"
            ]
          }
        }
      },
      "AddStockDto": {
        "type": "object",
        "properties": {
          "storeId": {
            "type": "string",
            "description": "Store to add or reduce stock in"
          },
          "quantity": {
            "type": "number",
            "example": 10,
            "description": "Quantity to add (positive) or reduce (negative)"
          }
        },
        "required": [
          "storeId",
          "quantity"
        ]
      }
    }
  }
}